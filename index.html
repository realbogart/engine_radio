<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/style">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script type="text/javascript" src="/simplesocket"></script>
		
		<script type="text/javascript">
			var webSocket = $.simpleWebSocket({ url: 'ws://128.199.54.168:81/' });
			webSocket.connect();
			
			webSocket.isConnected(function(connected) {
				webSocket.send('connected');
			});
			
			webSocket.listen(function(msgString) {
				var msgJson = JSON.parse( msgString );
				
				if(msgJson.type == 'reload')
				{
					$('link[href="/style"]').attr('href','/style');
				}
				else if(msgJson.type == 'setBackground')
				{
					$("body").css("background-image","url('"+msgJson.data+"')");
				}
				else if(msgJson.type == 'setActiveShow')
				{
					$("#show1").removeClass("showActive");
					$("#show2").removeClass("showActive");
					$("#show3").removeClass("showActive");
					
					$("#show1").addClass("showInactive");
					$("#show2").addClass("showInactive");
					$("#show3").addClass("showInactive");
					
					$("#show"+msgJson.data).addClass("showActive");
				}
			});
		</script>
	</head>
	<body>
		<div id="stream">
			<audio controls>
				<source src="http://128.199.54.168:8000/stream" id="audio" type="audio/mpeg">
			</audio>
		</div>
		
		<div id="schedule">
			<p id="show1" class="showInactive">MASSIVE DAMAGE ---------- 13:00</p>
			<p id="show2" class="showInactive">FUNKY FRIDAY ------------ 14:00</p>
			<p id="show3" class="showInactive">UNO ORA ----------------- 15:00</p>
		</div>
	</body>
</html>
